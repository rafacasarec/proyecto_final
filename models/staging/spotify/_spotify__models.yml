version: 2

models:
  - name: stg_spotify__dim_album
    description: "Modelo que transforma los datos de álbumes en Spotify, incluyendo información clave como el artista principal, número de canciones y fecha de lanzamiento."
    columns:
      - name: album_id
        description: "Identificador único del álbum."
        tests:
          - unique
          - not_null
      - name: desc_album
        description: "Nombre o título del álbum."
        tests:
          - not_null
      - name: artista_id
        description: "Identificador único del artista principal del álbum."
        tests:
          - not_null
      - name: name_artist
        description: "Nombre del artista principal del álbum."
      - name: release_date
        description: "Fecha de lanzamiento del álbum."
        tests:
          - not_null
      - name: total_songs
        description: "Número total de canciones en el álbum."
      - name: spotify_url
        description: "URL del álbum en Spotify."
      - name: _dlt_load_id
        description: "Identificador del proceso de carga en DLT."
      - name: _dlt_id
        description: "Identificador único del registro en DLT."

  - name: stg_spotify__dim_artista
    description: "Modelo que transforma y normaliza los datos de artistas en Spotify, incluyendo sus géneros, seguidores, y popularidad. También genera identificadores únicos para los géneros."
    columns:
      - name: artista_id
        description: "Identificador único del artista."
        tests:
          - unique
          - not_null
      - name: name_artist
        description: "Nombre del artista."
        tests:
          - not_null
      - name: followers
        description: "Cantidad de seguidores del artista en Spotify."
      - name: popularity
        description: "Puntuación de popularidad del artista en Spotify."
      - name: spotify_url
        description: "URL del perfil del artista en Spotify."
      - name: _dlt_load_id
        description: "Identificador del proceso de carga en DLT."
      - name: _dlt_id
        description: "Identificador único del registro en DLT."
      - name: genero
        description: "Género asociado al artista. Extraído y limpiado de la lista de géneros original."
      - name: genero_id
        description: "Identificador único generado para cada género asociado al artista."
        tests:
          - unique


  - name: stg_spotify__dim_cancion
    description: "Modelo que normaliza los datos de canciones en Spotify, manejando múltiples artistas por canción y estandarizando información clave como popularidad, duración y álbumes asociados."
    columns:
      - name: cancion_id
        description: "Identificador único de la canción."
        tests:
          - unique
          - not_null
      - name: desc_song
        description: "Descripción o título de la canción."
      - name: album_id
        description: "Identificador único del álbum al que pertenece la canción."
        tests:
          - not_null
      - name: desc_album
        description: "Descripción o título del álbum asociado a la canción."
      - name: album_release_date
        description: "Fecha de lanzamiento del álbum asociado a la canción."
      - name: duracion_ms
        description: "Duración de la canción en milisegundos."
      - name: explicit
        description: "Indica si la canción contiene contenido explícito (TRUE o FALSE)."
      - name: popularity
        description: "Puntuación de popularidad de la canción en Spotify."
      - name: spotify_url
        description: "URL de la canción en Spotify."
      - name: _dlt_load_id
        description: "Identificador del proceso de carga en DLT."
      - name: _dlt_id
        description: "Identificador único del registro en DLT."
      - name: artista_id
        description: "Identificador único del artista relacionado con la canción."
        tests:
          - not_null
      - name: artist_name
        description: "Nombre del artista relacionado con la canción."



  - name: stg_spotify__dim_competidores
    description: "Modelo que transforma y organiza los datos de competidores relacionados con los artistas del Top 50 de Spotify, incluyendo género, popularidad y seguidores."
    columns:
      - name: artist_id
        description: "Identificador único del competidor (artista)."
        tests:
          - unique
          - not_null
      - name: name_artist
        description: "Nombre del competidor (artista)."
        tests:
          - not_null
      - name: genero
        description: "Género principal asociado al competidor."
      - name: followers
        description: "Cantidad de seguidores del competidor en Spotify."
      - name: popularity
        description: "Puntuación de popularidad del competidor en Spotify."
      - name: spotify_url
        description: "URL del perfil del competidor en Spotify."
      - name: _dlt_load_id
        description: "Identificador del proceso de carga en DLT."
      - name: _dlt_id
        description: "Identificador único del registro en DLT."


  - name: stg_spotify__dim_fecha
    description: "Modelo que organiza y estandariza la tabla de fechas para análisis temporal en Spotify."
    columns:
      - name: fecha
        description: "Fecha específica en formato YYYY-MM-DD."
        tests:
          - unique
          - not_null
      - name: dia
        description: "Día del mes correspondiente a la fecha."
      - name: mes
        description: "Mes del año correspondiente a la fecha."
      - name: nombre_mes
        description: "Nombre del mes correspondiente a la fecha."
      - name: a_o
        description: "Año correspondiente a la fecha."
        tests:
          - not_null
      - name: trimestre
        description: "Trimestre del año correspondiente a la fecha."
      - name: dia_semana
        description: "Nombre del día de la semana correspondiente a la fecha."
      - name: es_fin_semana
        description: "Indica si la fecha corresponde a un fin de semana (TRUE o FALSE)."
      - name: _dlt_load_id
        description: "Identificador del proceso de carga en DLT."
      - name: _dlt_id
        description: "Identificador único del registro en DLT."

  - name: stg_spotify__dim_genero
    description: "Modelo que transforma y organiza los datos de géneros musicales en Spotify, incluyendo métricas como popularidad global y número de artistas y canciones asociadas al género."
    columns:
      - name: id_genero
        description: "Identificador único generado para cada género musical."
        tests:
          - unique
          - not_null
      - name: desc_genero
        description: "Descripción o nombre del género musical."
        tests:
          - not_null
      - name: rate_popularity
        description: "Popularidad global del género, en una escala decimal."
      - name: artist_top50
        description: "Número de artistas asociados al género en el Top 50 de Spotify."
      - name: song_top50
        description: "Número de canciones asociadas al género en el Top 50 de Spotify."
      - name: _dlt_load_id
        description: "Identificador del proceso de carga en DLT."
      - name: _dlt_id
        description: "Identificador único del registro en DLT."

  - name: stg_spotify__fct_top_50
    description: "Modelo que normaliza y organiza los datos del Top 50 global de Spotify, incluyendo múltiples artistas por canción, información del álbum y métricas como streams y popularidad."
    columns:
      - name: playlist_id
        description: "Identificador único de la playlist de Spotify."
        tests:
          - unique
          - not_null
      - name: fecha
        description: "Fecha específica en la que se registraron los datos del Top 50."
        tests:
          - not_null
      - name: date
        description: "Timestamp ajustado a UTC para la fecha de registro."
        tests:
          - not_null
      - name: position
        description: "Posición de la canción en el ranking del Top 50."
        tests:
          - not_null
      - name: id_song
        description: "Identificador único de la canción en el Top 50."
        tests:
          - not_null
      - name: desc_song
        description: "Título o descripción de la canción."
      - name: album_id
        description: "Identificador único del álbum asociado a la canción."
        tests:
          - not_null
      - name: desc_album
        description: "Título o descripción del álbum asociado a la canción."
      - name: release_date
        description: "Fecha de lanzamiento del álbum asociado a la canción."
      - name: duration_ms
        description: "Duración de la canción en milisegundos."
      - name: popularity
        description: "Nivel de popularidad de la canción en Spotify."
      - name: streams_estimated
        description: "Número estimado de streams de la canción."
      - name: artist_id
        description: "Identificador único del artista asociado a la canción."
        tests:
          - not_null
      - name: artist_name
        description: "Nombre del artista asociado a la canción."
      - name: _dlt_load_id
        description: "Identificador del proceso de carga en DLT."
      - name: _dlt_id
        description: "Identificador único del registro en DLT."

